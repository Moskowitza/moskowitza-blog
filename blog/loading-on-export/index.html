<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/moskowitza-blog/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <script>__SAPPER__={baseUrl:"/moskowitza-blog",preloaded:[void 0,null,{post:{title:"Load images on exported site",slug:"loading-on-export",html:"\n\u003Cp\u003EWhen I deployed the sapper template to github pages success kid did not show up. To solve this problem I looked at the src attribute of the image tag and saw \u003Ci\u003Esrc=\"\u002Fclient\u002F_some-hash_.jpg\"\u003C\u002Fi\u003E I looked under the sources tag and saw the image was downloaded but the directory path was not correct in the markup. The src should be \u003Ci\u003Esrc=\"\u002Fmoskowitza-blog\u002Fclient\u002F_some-hash_.jpg\"\u003C\u002Fi\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EFrom there I went mad googling solutions, re-read the previous blog posts and realized I was on my own. I had a sense I could chnage this path in the rollup config. This is the first time I'm using rollup instead of webpack (I could not get HMR working with webpack). Fortunately, the solution was straightforward.\u003C\u002Fp\u003E\n\n\u003Cul\u003E\n\t\u003Cli\u003Eget your base path, in my case the name of the repo\u003C\u002Fli\u003E\n\t\u003Cli\u003Efind the 2 places in the rollup.config.js where we set publicpath property in the url() \u003C\u002Fli\u003E\n\t\u003Cli\u003EReplace that path with a ternerary checking the envitorment\u003C\u002Fli\u003E\n\t\u003Cli\u003EpublicPath: dev ? '\u002Fclient\u002F' : '\u002F\u003Ci\u003Eyour-repo-name\u003C\u002Fi\u003E\u002Fclient\u002F',\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003EThe image now shows up when visiting the deployed site on GH pages and when I develop locally.\u003C\u002Fp\u003E\n\t\t"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/moskowitza-blog/service-worker.js');(function(){try{eval("async function x(){}");var main="/moskowitza-blog/client/client.dfb84b57.js"}catch(e){main="/moskowitza-blog/client/legacy/client.b4f79b13.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/moskowitza-blog/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <link href=client/client-e118e612.css rel=stylesheet><link href=client/[slug]-5bc8f95f.css rel=stylesheet> <title>Load images on exported site</title> <link href=/moskowitza-blog/client/client.dfb84b57.js rel=modulepreload as=script crossorigin=use-credentials><link href=/moskowitza-blog/client/client-e118e612.css rel=preload as=style><link href=/moskowitza-blog/client/[slug].ee175b50.js rel=modulepreload as=script crossorigin=use-credentials><link href=/moskowitza-blog/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/moskowitza-blog/client/[slug]-5bc8f95f.css rel=preload as=style></head> <body> <div id=sapper> <nav class=svelte-1dbd5up><ul class=svelte-1dbd5up><li class=svelte-1dbd5up><a class=svelte-1dbd5up href=.>home</a></li> <li class=svelte-1dbd5up><a class=svelte-1dbd5up href=about>about</a></li> <li class=svelte-1dbd5up><a class=svelte-1dbd5up href=blog aria-current=page rel=prefetch>blog</a></ul></nav> <main class=svelte-1uhnsl8> <h1>Load images on exported site</h1> <div class="content svelte-emm3f3"> <p>When I deployed the sapper template to github pages success kid did not show up. To solve this problem I looked at the src attribute of the image tag and saw <i>src="/client/_some-hash_.jpg"</i> I looked under the sources tag and saw the image was downloaded but the directory path was not correct in the markup. The src should be <i>src="/moskowitza-blog/client/_some-hash_.jpg"</i></p> <p>From there I went mad googling solutions, re-read the previous blog posts and realized I was on my own. I had a sense I could chnage this path in the rollup config. This is the first time I'm using rollup instead of webpack (I could not get HMR working with webpack). Fortunately, the solution was straightforward.</p> <ul> <li>get your base path, in my case the name of the repo</li> <li>find the 2 places in the rollup.config.js where we set publicpath property in the url() </li> <li>Replace that path with a ternerary checking the envitorment</li> <li>publicPath: dev ? '/client/' : '/<i>your-repo-name</i>/client/',</li> </ul> <p>The image now shows up when visiting the deployed site on GH pages and when I develop locally.</p> </div></main></div> 